<?xml version="1.0" encoding="ISO-8859-1" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
	  xmlns:f="http://java.sun.com/jsf/core"  
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:p="http://primefaces.prime.com.tr/ui">
      
<h:head>
	<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1" />
	<link type="text/css" rel="stylesheet" href="resources/css/default.css" />
	<title>VoteGame</title>
</h:head>
<h:body>

#{gameControllerBean.check()}

<p:layout fullPage="true">  
  
    <p:layoutUnit position="north" size="60"> 
    	<h:form>
    			<h:panelGrid columns="2" border="0" width="100%" columnClasses="column1,column2">
 	 			 	<h1>VoteGame</h1>
     				
    				<h:panelGrid columns="2" border="0" width="100">
    					<p:commandButton id="de" value="#{props.german}" image="germanflag" actionListener="#{gameModelBean.changeLocale}" onclick="submit()"/>  
						<p:commandButton id="en" value="#{props.english}" image="englishflag" actionListener="#{gameModelBean.changeLocale}" onclick="submit()"/>  
    				</h:panelGrid>
    			</h:panelGrid>
    	</h:form>
    </p:layoutUnit>  
  
    <p:layoutUnit position="south" size="50">  
        <h:outputText value="Footer" />  
    </p:layoutUnit>  
  
    <p:layoutUnit position="west" size="800">  
		<h:form>
			<br /><br /><br /><br />
			
			<h:panelGrid columns="1" cellpadding="5" border="0">  
            	
            		<h:outputText value="You're playing in game #{gameModelBean.game.gameId}" rendered="#{gameModelBean.gameJoined and !gameModelBean.game.gameOver}" />
					<h:outputText value="You are #{gameModelBean.user.nickname}" rendered="#{!empty gameModelBean.user.nickname and !gameModelBean.game.gameOver}" />

					<h:outputText value="Your last vote #{gameModelBean.user.currentVote} was wrong. Try again!" rendered="#{gameModelBean.gameJoined and !gameModelBean.game.gameOver and gameModelBean.userVote != 0}" />
					<h:outputText value="Guess number between #{gameModelBean.game.minRangeNr} and #{gameModelBean.game.maxRangeNr}" rendered="#{gameModelBean.gameJoined and !gameModelBean.game.gameOver and gameModelBean.userVote == 0}" />
					
					<h:panelGrid columns="2" cellpadding="5" border="0" >  
						<h:inputText id="voteInput" label="Vote" value="#{gameModelBean.user.currentVote}" rendered="#{gameModelBean.gameJoined and !gameModelBean.game.gameOver}">
							<f:validateLongRange 
								minimum="#{gameModelBean.game.minRangeNr}"
							 	maximum="#{gameModelBean.game.maxRangeNr}"/>
						</h:inputText>
					<h:commandButton value="Vote" action="#{gameControllerBean.addVote}" rendered="#{gameModelBean.gameJoined and !gameModelBean.game.gameOver}" />
					</h:panelGrid> 

					<h:outputText value="Game over! Secret key was #{gameModelBean.game.secretVote}"  rendered="#{gameModelBean.game.gameOver}" />
					<h:outputText value="The game was won by ..."  rendered="#{gameModelBean.game.gameOver}" />
					
	      </h:panelGrid> 
	      
	      <br />
		  
		  <h:panelGrid columns="2" cellpadding="5" border="0">  
            	<h:commandButton value="Neues Spiel beitreten" action="#{gameControllerBean.startNewGame}" rendered="#{gameModelBean.gameJoined and gameModelBean.game.gameOver}"/>
	      </h:panelGrid> 
	       
	      <p:message for="voteInput" showDetail="true"/>
	      
		</h:form>
    </p:layoutUnit>  
  
    <p:layoutUnit position="center" size="200">  
     		<h:outputText value="Statistik" /> 
    </p:layoutUnit>  
  
</p:layout>

</h:body>
</html>