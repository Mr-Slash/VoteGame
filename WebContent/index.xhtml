<?xml version="1.0" encoding="ISO-8859-1" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
	  xmlns:f="http://java.sun.com/jsf/core"  
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:p="http://primefaces.prime.com.tr/ui">
      
<h:head>
	<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1" />
	<link type="text/css" rel="stylesheet" href="resources/css/default.css" />
	<title>VoteGame</title>
</h:head>
<h:body>

#{gameControllerBean.check()}

<p:layout fullPage="true">  
  
    <p:layoutUnit position="north" size="70"> 
    	<h:form>
    			<h:panelGrid columns="2" border="0" width="100%" columnClasses="header1,header2">
 	 			 	<h:graphicImage library="images" name="title.png"/>
    				<h:panelGrid columns="2" border="0" width="100">
    					<p:commandButton id="de" value="#{props.german}" image="germanflag" actionListener="#{gameModelBean.changeLocale}" onclick="submit()"/>  
						<p:commandButton id="en" value="#{props.english}" image="englishflag" actionListener="#{gameModelBean.changeLocale}" onclick="submit()"/>  
    				</h:panelGrid>
    			</h:panelGrid>
    	</h:form>
    </p:layoutUnit>  
  
    <p:layoutUnit position="west" size="800">  
		<h:form>
		
			<h:panelGrid columns="2" width="750" border="0" columnClasses="dices,dices" styleClass="maintext">  
				<h:graphicImage library="images" name="dices.png"/>
		  
				<h:panelGrid columns="1" cellpadding="5" cellspacing="5" border="0"> 
				
            		<h:outputText value="#{props.ingame} #{gameModelBean.game.gameId}" 
            					  rendered="#{gameModelBean.gameJoined and !gameModelBean.game.gameOver}"/>
            					  
					<h:outputText value="#{props.player} '#{gameModelBean.user.nickname}'" 
					              rendered="#{!empty gameModelBean.user.nickname and !gameModelBean.game.gameOver}"/>

					<h:outputText value="#{props.wrong1} #{gameModelBean.user.currentVote} #{props.wrong2}" 
								  rendered="#{gameModelBean.userVote != null and gameModelBean.gameJoined and !gameModelBean.game.gameOver}"/>
					
					<h:outputText value="#{props.guess} #{gameModelBean.game.minRangeNr} #{props.end} #{gameModelBean.game.maxRangeNr}:"
								  rendered="#{gameModelBean.gameJoined and !gameModelBean.game.gameOver and gameModelBean.userVote == null}"/>
					
					<h:panelGrid columns="2" cellpadding="5" border="0" >  
						<h:inputText id="voteInput" 
									 required="true" 
									 value="#{gameModelBean.user.currentVote}" 
									 rendered="#{gameModelBean.gameJoined and !gameModelBean.game.gameOver}">
							<f:validateLongRange minimum="#{gameModelBean.game.minRangeNr}" maximum="#{gameModelBean.game.maxRangeNr}"/>
						</h:inputText>
					<h:commandButton value="#{props.vote}" action="#{gameControllerBean.addVote}" rendered="#{gameModelBean.gameJoined and !gameModelBean.game.gameOver}" />
					</h:panelGrid> 

					<h:outputText value="#{props.gameover} #{gameModelBean.game.secretVote}" 
								  rendered="#{gameModelBean.game.gameOver}"/>
					
					<h:outputText value="#{props.wonby} ???"  rendered="#{gameModelBean.game.gameOver}" />
					
	      		</h:panelGrid> 
	      
	      </h:panelGrid> 
	      <br />
		  
		  <h:panelGrid columns="1" width="100%" border="0" columnClasses="newgame">  
            	<h:commandButton value="#{props.newgame}" action="#{gameControllerBean.startNewGame}" rendered="#{gameModelBean.gameJoined and gameModelBean.game.gameOver}"/>
	      </h:panelGrid> 
	       
	      <p:message for="voteInput" showDetail="true" />
	      
		</h:form>
    </p:layoutUnit>  
  
    <p:layoutUnit position="center" size="200">  
     		<h:outputText value="Statistik" /> 
    </p:layoutUnit>  
  
    <p:layoutUnit position="south" size="50">  
         <h:panelGrid columns="3" border="0" width="100%" columnClasses="footer1,footer2,footer3">
           <h:outputText value="by" /> 
           <h:outputLink value="mailto:sfelicio@hsr.ch">Sandro Felicioni</h:outputLink>
           <h:outputLink value="mailto:dgiampa@hsr.ch" >Davide Giampa</h:outputLink>
         </h:panelGrid>
    </p:layoutUnit>  
    
</p:layout>

</h:body>
</html>